<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LifeQuest RPG - Convierte tu vida en una aventura √©pica">
    <title>LifeQuest RPG - Cosmic Edition</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        /* ==========================================
           ESTILOS ORIGINALES DE LIFEQUEST RPG
           Preservados exactamente como estaban
           ========================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-purple: #9d00ff;
            --neon-green: #00ff88;
            --neon-yellow: #ffff00;
            --neon-red: #ff0040;
            --dark-bg: #0a0a1a;
            --darker-bg: #050510;
            --card-bg: rgba(20, 20, 40, 0.8);
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--dark-bg);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }

        /* Animated Background */
        .cosmic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 20% 80%, rgba(157, 0, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(0, 243, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 40% 40%, rgba(255, 0, 255, 0.1) 0%, transparent 40%),
                var(--dark-bg);
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Neon Effects */
        .neon-text {
            text-shadow: 
                0 0 10px var(--neon-blue),
                0 0 20px var(--neon-blue),
                0 0 40px var(--neon-blue);
        }

        .neon-border {
            box-shadow: 
                0 0 5px var(--neon-blue),
                0 0 10px var(--neon-blue),
                inset 0 0 5px rgba(0, 243, 255, 0.1);
            border: 1px solid var(--neon-blue);
        }

        /* Glassmorphism Cards */
        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(0, 243, 255, 0.2);
            border-color: var(--neon-blue);
        }

        /* Buttons */
        .btn-neon {
            background: linear-gradient(45deg, transparent, rgba(0, 243, 255, 0.1));
            border: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-neon:hover {
            background: var(--neon-blue);
            color: var(--dark-bg);
            box-shadow: 
                0 0 20px var(--neon-blue),
                0 0 40px var(--neon-blue);
            transform: scale(1.05);
        }

        /* Progress Bars */
        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            height: 20px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* XP Bar */
        .xp-bar {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            height: 30px;
            overflow: hidden;
            border: 2px solid var(--neon-yellow);
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.3);
        }

        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-yellow), #ff8800);
            border-radius: 20px;
            transition: width 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark-bg);
            text-shadow: 0 0 5px rgba(255,255,255,0.5);
        }

        /* Boss Health Bar */
        .boss-health {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid var(--neon-red);
            border-radius: 25px;
            height: 40px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 0, 64, 0.3);
        }

        .boss-health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0040, #ff4400);
            border-radius: 25px;
            transition: width 0.5s ease;
            position: relative;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px var(--neon-blue); }
            50% { box-shadow: 0 0 40px var(--neon-blue), 0 0 60px var(--neon-purple); }
        }

        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes levelUp {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); filter: brightness(2); }
            100% { transform: scale(1); }
        }

        .level-up {
            animation: levelUp 1s ease-out;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 50px rgba(0, 243, 255, 0.3);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--darker-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--neon-blue);
            border-radius: 5px;
        }

        /* Quest Items */
        .quest-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--neon-blue);
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 10px 10px 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quest-item:hover {
            background: rgba(0, 243, 255, 0.1);
            transform: translateX(10px);
        }

        .quest-item.completed {
            opacity: 0.6;
            border-left-color: var(--neon-green);
            text-decoration: line-through;
        }

        /* Achievement Cards */
        .achievement-card {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 140, 0, 0.1));
            border: 1px solid gold;
            border-radius: 12px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .achievement-card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
        }

        .achievement-card.locked {
            opacity: 0.5;
            filter: grayscale(1);
        }

        /* Inventory Grid */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            padding: 20px;
        }

        .inventory-item {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--neon-purple);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .inventory-item:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--neon-purple);
        }

        .inventory-item.equipped {
            border-color: var(--neon-green);
            box-shadow: 0 0 15px var(--neon-green);
        }

        /* Chat Messages */
        .chat-message {
            background: rgba(0, 243, 255, 0.1);
            border-radius: 15px;
            padding: 10px 15px;
            margin: 5px 0;
            max-width: 80%;
            animation: messageSlide 0.3s ease;
        }

        .chat-message.own {
            background: rgba(255, 0, 255, 0.1);
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .chat-message.other {
            border-bottom-left-radius: 5px;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 2px solid var(--neon-green);
            border-radius: 12px;
            padding: 20px;
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 350px;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            border-color: var(--neon-red);
            box-shadow: 0 10px 30px rgba(255, 0, 64, 0.3);
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 2px solid var(--neon-blue);
            padding: 10px;
            display: flex;
            justify-content: space-around;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px 15px;
            border-radius: 10px;
        }

        .nav-item:hover, .nav-item.active {
            color: var(--neon-blue);
            background: rgba(0, 243, 255, 0.1);
        }

        .nav-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding-bottom: 80px;
            }
            
            .modal-content {
                margin: 20px;
                max-height: 70vh;
            }
        }

        /* Damage Number Animation */
        .damage-number {
            position: absolute;
            color: var(--neon-red);
            font-weight: bold;
            font-size: 1.5rem;
            pointer-events: none;
            animation: damageFloat 1s ease-out forwards;
            text-shadow: 0 0 10px var(--neon-red);
        }

        @keyframes damageFloat {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-50px) scale(1.5); }
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-bg);
            z-index: 5000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(0, 243, 255, 0.1);
            border-top-color: var(--neon-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 4000;
        }

        @keyframes confettiFall {
            0% { opacity: 1; transform: translateY(-100px) rotate(0deg); }
            100% { opacity: 0; transform: translateY(100vh) rotate(720deg); }
        }

        /* Particles */
        .particle {
            position: fixed;
            pointer-events: none;
            opacity: 0;
            z-index: 1000;
        }

        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner mb-4"></div>
        <h2 class="font-orbitron text-2xl neon-text">Cargando LifeQuest...</h2>
    </div>

    <!-- Background Effects -->
    <div class="cosmic-bg"></div>
    <div class="stars" id="starsContainer"></div>

    <!-- ==========================================
         ESTRUCTURA HTML ORIGINAL PRESERVADA
         ========================================== -->
    
    <!-- Header -->
    <header class="relative z-10 pt-6 pb-4 px-4">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-purple-600 flex items-center justify-center text-2xl border-2 border-cyan-400 animate-pulse">
                    ‚öîÔ∏è
                </div>
                <div>
                    <h1 class="font-orbitron text-2xl md:text-3xl font-black neon-text">LifeQuest RPG</h1>
                    <p class="text-xs text-cyan-300 opacity-80">Cosmic Edition</p>
                </div>
            </div>
            
            <!-- Notification Bell -->
            <div class="relative cursor-pointer hover:scale-110 transition-transform" onclick="app.showNotification('No tienes notificaciones', 'info')">
                <i class="fas fa-bell text-2xl text-cyan-400"></i>
                <span id="notifBadge" class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center hidden">0</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main class="relative z-10 max-w-6xl mx-auto px-4 pb-24 md:pb-6 space-y-6">
        
        <!-- Daily Reset Notice -->
        <div class="glass-card p-4 border-yellow-500/30 bg-yellow-500/5">
            <div class="flex items-center gap-3 text-yellow-400">
                <i class="fas fa-sun text-xl"></i>
                <p class="text-sm">üåÖ Las misiones se reinician autom√°ticamente cada d√≠a a las 5:00 AM</p>
            </div>
        </div>

        <!-- Hero Stats Card -->
        <div class="glass-card p-6 pulse-glow">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <!-- Avatar -->
                <div class="relative group cursor-pointer" onclick="app.openAvatarModal()">
                    <div id="avatarDisplay" class="w-24 h-24 rounded-full bg-gradient-to-br from-cyan-500 to-purple-600 flex items-center justify-center text-5xl border-4 border-cyan-400 shadow-lg shadow-cyan-500/50 transition-transform group-hover:scale-110">
                        üßô‚Äç‚ôÇÔ∏è
                    </div>
                    <div class="absolute -bottom-2 -right-2 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-black font-bold border-2 border-white shadow-lg" id="levelBadge">
                        1
                    </div>
                    <div class="absolute inset-0 rounded-full border-4 border-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity animate-ping"></div>
                </div>

                <!-- Player Info -->
                <div class="flex-1 text-center md:text-left">
                    <h2 id="playerName" class="font-orbitron text-2xl font-bold text-white mb-1">H√©roe</h2>
                    <p id="playerEmail" class="text-cyan-300 text-sm mb-3">jugador@lifequest.com</p>
                    
                    <!-- XP Bar -->
                    <div class="mb-2 flex justify-between text-xs text-cyan-300">
                        <span>Nivel <span id="currentLevel">1</span></span>
                        <span><span id="currentXP">0</span> / <span id="neededXP">100</span> XP</span>
                    </div>
                    <div class="xp-bar">
                        <div id="xpBarFill" class="xp-fill" style="width: 0%">
                            <span id="xpPercentage" class="text-xs">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Currency -->
                <div class="flex gap-4">
                    <div class="text-center">
                        <div class="w-14 h-14 rounded-full bg-yellow-500/20 border-2 border-yellow-500 flex items-center justify-center mb-1 mx-auto">
                            <i class="fas fa-coins text-yellow-400 text-2xl"></i>
                        </div>
                        <p id="goldAmount" class="font-orbitron font-bold text-yellow-400">0</p>
                        <p class="text-xs text-gray-400">Oro</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weekly Boss Section -->
        <div class="glass-card p-6 border-red-500/50 bg-red-900/10" onclick="app.openBossModal()">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 rounded-full bg-red-500/20 border-2 border-red-500 flex items-center justify-center animate-pulse">
                        <span class="text-2xl">üëπ</span>
                    </div>
                    <div>
                        <h3 class="font-orbitron text-lg font-bold text-red-400">Procrastinaci√≥n Suprema</h3>
                        <p class="text-xs text-gray-400">Jefe Semanal ‚Ä¢ Nv. <span id="bossLevel">5</span></p>
                    </div>
                </div>
                <i class="fas fa-chevron-right text-gray-500"></i>
            </div>
            
            <div class="boss-health mb-2">
                <div id="bossHealthBar" class="boss-health-fill" style="width: 75%"></div>
            </div>
            <div class="flex justify-between text-sm text-gray-400 mb-4">
                <span id="bossCurrentHP">750</span>
                <span id="bossMaxHP">1000</span>
                <span>HP</span>
            </div>
            
            <div class="flex flex-wrap gap-2 justify-center">
                <span class="px-3 py-1 bg-yellow-500/20 border border-yellow-500 rounded-full text-yellow-400 text-xs flex items-center gap-1">
                    <i class="fas fa-bolt"></i> +500 XP
                </span>
                <span class="px-3 py-1 bg-yellow-600/20 border border-yellow-600 rounded-full text-yellow-600 text-xs flex items-center gap-1">
                    <i class="fas fa-coins"></i> +100 Oro
                </span>
                <span class="px-3 py-1 bg-purple-500/20 border border-purple-500 rounded-full text-purple-400 text-xs flex items-center gap-1">
                    <i class="fas fa-gift"></i> Cofre √âpico
                </span>
            </div>
        </div>

        <!-- Quick Actions Grid -->
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <button onclick="app.openProfileModal()" class="glass-card p-4 text-left hover:border-cyan-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-user-edit text-cyan-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-cyan-300">Editar Perfil</h4>
                <p class="text-xs text-gray-500">Cambia tu nombre y email</p>
            </button>

            <button onclick="app.openAvatarModal()" class="glass-card p-4 text-left hover:border-purple-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-palette text-purple-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-purple-300">Personalizar Avatar</h4>
                <p class="text-xs text-gray-500">Cambia tu apariencia</p>
            </button>

            <button onclick="app.openInventoryModal()" class="glass-card p-4 text-left hover:border-yellow-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-backpack text-yellow-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-yellow-300">Mi Inventario</h4>
                <p class="text-xs text-gray-500">Color de Fondo</p>
            </button>

            <button onclick="app.openShopModal()" class="glass-card p-4 text-left hover:border-green-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-store text-green-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-green-300">Tienda</h4>
                <p class="text-xs text-gray-500">Compra cosm√©ticos</p>
            </button>

            <button onclick="app.openAchievementsModal()" class="glass-card p-4 text-left hover:border-yellow-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-trophy text-yellow-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-yellow-300">Logros Desbloqueados</h4>
                <p class="text-xs text-gray-500"><span id="achievementsCount">0</span> de 161 logros</p>
            </button>

            <button onclick="app.exportData()" class="glass-card p-4 text-left hover:border-blue-400 transition-all group">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center group-hover:scale-110 transition-transform">
                        <i class="fas fa-download text-blue-400"></i>
                    </div>
                    <i class="fas fa-chevron-right text-gray-600 ml-auto"></i>
                </div>
                <h4 class="font-bold text-sm text-blue-300">Exportar Datos</h4>
                <p class="text-xs text-gray-500">Guarda tu progreso</p>
            </button>
        </div>

        <!-- Party Section -->
        <div class="glass-card p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-orbitron text-xl text-purple-300 flex items-center gap-2">
                    <i class="fas fa-users"></i> Miembros del Equipo
                </h3>
                <button onclick="app.openPartyModal()" class="btn-neon text-xs py-2 px-4">
                    <i class="fas fa-comments mr-2"></i>Chat de Party
                </button>
            </div>
            
            <div id="partyList" class="space-y-3">
                <div class="flex items-center gap-3 p-3 bg-black/20 rounded-lg border border-purple-500/30">
                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-purple-600 flex items-center justify-center text-2xl border-2 border-cyan-400">
                        üßô‚Äç‚ôÇÔ∏è
                    </div>
                    <div class="flex-1">
                        <p class="font-bold text-cyan-300">T√∫</p>
                        <p class="text-xs text-green-400">‚óè En l√≠nea</p>
                    </div>
                    <span class="text-sm font-orbitron text-cyan-400">Lv. <span class="party-level">1</span></span>
                </div>
            </div>
        </div>

        <!-- Recent Achievements -->
        <div class="glass-card p-6">
            <h3 class="font-orbitron text-xl text-yellow-400 mb-4 flex items-center gap-2">
                <i class="fas fa-medal"></i> üèÜ √öltimos Logros
            </h3>
            <div id="recentAchievements" class="space-y-2">
                <p class="text-gray-500 text-center py-4 text-sm">A√∫n no has desbloqueado logros</p>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="glass-card p-6">
            <h3 class="font-orbitron text-xl text-cyan-300 mb-4 flex items-center gap-2">
                <i class="fas fa-chart-bar"></i> üìä Estad√≠sticas
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="text-center p-4 bg-black/20 rounded-lg border border-cyan-500/20">
                    <i class="fas fa-scroll text-cyan-400 text-2xl mb-2"></i>
                    <p id="statQuests" class="text-2xl font-orbitron font-bold text-white">0</p>
                    <p class="text-xs text-gray-400">Misiones Completadas</p>
                </div>
                <div class="text-center p-4 bg-black/20 rounded-lg border border-orange-500/20">
                    <i class="fas fa-fire text-orange-400 text-2xl mb-2"></i>
                    <p id="statStreak" class="text-2xl font-orbitron font-bold text-white">0</p>
                    <p class="text-xs text-gray-400">Racha (d√≠as)</p>
                </div>
                <div class="text-center p-4 bg-black/20 rounded-lg border border-yellow-500/20">
                    <i class="fas fa-trophy text-yellow-400 text-2xl mb-2"></i>
                    <p id="statAchievements" class="text-2xl font-orbitron font-bold text-white">0</p>
                    <p class="text-xs text-gray-400">Logros</p>
                </div>
                <div class="text-center p-4 bg-black/20 rounded-lg border border-purple-500/20">
                    <i class="fas fa-clock text-purple-400 text-2xl mb-2"></i>
                    <p id="statTime" class="text-2xl font-orbitron font-bold text-white">0h</p>
                    <p class="text-xs text-gray-400">Tiempo Total</p>
                </div>
            </div>
        </div>

        <!-- Quests Section -->
        <div class="glass-card p-6">
            <h3 class="font-orbitron text-xl text-cyan-300 mb-4 flex items-center gap-2">
                <i class="fas fa-scroll"></i> Misiones
            </h3>
            
            <!-- Add Quest Form -->
            <div class="space-y-3 mb-6">
                <input type="text" id="questInput" placeholder="Nombre de la misi√≥n" 
                    class="w-full bg-black/30 border border-cyan-500/50 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400 transition-colors">
                
                <div class="flex gap-2">
                    <select id="questCategory" class="flex-1 bg-black/30 border border-cyan-500/50 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-cyan-400">
                        <option value="strength">üí™ Fuerza</option>
                        <option value="intelligence">üß† Inteligencia</option>
                        <option value="discipline">‚è∞ Disciplina</option>
                        <option value="social">üë• Social</option>
                        <option value="wellness">‚ù§Ô∏è Bienestar</option>
                    </select>
                    
                    <select id="questDifficulty" class="flex-1 bg-black/30 border border-cyan-500/50 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-cyan-400">
                        <option value="easy">üü¢ F√°cil</option>
                        <option value="medium" selected>üü° Medio</option>
                        <option value="hard">üî¥ Dif√≠cil</option>
                        <option value="epic">üü£ √âpico</option>
                    </select>
                </div>
                
                <button onclick="app.addQuest()" class="btn-neon w-full">
                    <i class="fas fa-plus mr-2"></i>Crear Misi√≥n
                </button>
            </div>

            <!-- Quests List -->
            <div id="questList" class="space-y-2 max-h-96 overflow-y-auto">
                <!-- Quests inserted here -->
            </div>
        </div>

        <!-- Reset Button -->
        <button onclick="app.confirmReset()" class="w-full glass-card p-4 text-red-400 hover:bg-red-500/10 hover:border-red-500/50 transition-all flex items-center justify-center gap-2 group">
            <i class="fas fa-trash-alt group-hover:rotate-12 transition-transform"></i>
            <span class="font-bold">Reiniciar Progreso</span>
            <span class="text-xs text-gray-500 ml-2">Borra todos tus datos</span>
        </button>

    </main>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav md:hidden">
        <div class="nav-item active" onclick="app.switchTab('quests')">
            <i class="fas fa-scroll"></i>
            <span class="text-xs">Misiones</span>
        </div>
        <div class="nav-item" onclick="app.switchTab('party')">
            <i class="fas fa-users"></i>
            <span class="text-xs">Party</span>
        </div>
        <div class="nav-item" onclick="app.switchTab('shop')">
            <i class="fas fa-store"></i>
            <span class="text-xs">Tienda</span>
        </div>
        <div class="nav-item" onclick="app.switchTab('avatar')">
            <i class="fas fa-user-astronaut"></i>
            <span class="text-xs">Avatar</span>
        </div>
        <div class="nav-item" onclick="app.switchTab('profile')">
            <i class="fas fa-cog"></i>
            <span class="text-xs">Perfil</span>
        </div>
    </nav>

    <!-- ==========================================
         MODALES
         ========================================== -->

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-orbitron text-2xl text-cyan-300">Editar Perfil</h3>
                <button onclick="app.closeModal('profileModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-gray-400 mb-2">Nombre de H√©roe</label>
                    <input type="text" id="editName" class="w-full bg-black/30 border border-cyan-500/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-cyan-400 transition-colors">
                </div>
                <div>
                    <label class="block text-sm text-gray-400 mb-2">Email</label>
                    <input type="email" id="editEmail" class="w-full bg-black/30 border border-cyan-500/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-cyan-400 transition-colors">
                </div>
                <button onclick="app.saveProfile()" class="btn-neon w-full mt-4">
                    <i class="fas fa-save mr-2"></i>Guardar Cambios
                </button>
            </div>
        </div>
    </div>

    <!-- Avatar Modal -->
    <div id="avatarModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-orbitron text-2xl text-purple-300">Personalizar Avatar</h3>
                <button onclick="app.closeModal('avatarModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            
            <div class="text-center mb-6">
                <div id="avatarPreview" class="w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-cyan-500 to-purple-600 flex items-center justify-center text-5xl mb-4 border-4 border-cyan-400 shadow-lg shadow-cyan-500/50">
                    üßô‚Äç‚ôÇÔ∏è
                </div>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-gray-400 mb-3">Selecciona tu Avatar</label>
                    <div class="grid grid-cols-5 gap-2">
                        <button onclick="app.selectAvatar('üßô‚Äç‚ôÇÔ∏è')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üßô‚Äç‚ôÇÔ∏è</button>
                        <button onclick="app.selectAvatar('‚öîÔ∏è')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">‚öîÔ∏è</button>
                        <button onclick="app.selectAvatar('üõ°Ô∏è')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üõ°Ô∏è</button>
                        <button onclick="app.selectAvatar('üèπ')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üèπ</button>
                        <button onclick="app.selectAvatar('‚ö°')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">‚ö°</button>
                        <button onclick="app.selectAvatar('üî•')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üî•</button>
                        <button onclick="app.selectAvatar('‚ùÑÔ∏è')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">‚ùÑÔ∏è</button>
                        <button onclick="app.selectAvatar('üåü')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üåü</button>
                        <button onclick="app.selectAvatar('üêâ')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üêâ</button>
                        <button onclick="app.selectAvatar('üëë')" class="p-3 text-2xl bg-black/30 rounded-lg hover:bg-cyan-500/30 transition-all hover:scale-110 border border-transparent hover:border-cyan-400">üëë</button>
                    </div>
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-3">Color de Fondo</label>
                    <div class="flex justify-center gap-3">
                        <button onclick="app.selectAvatarColor('from-cyan-500 to-purple-600')" class="w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-purple-600 border-2 border-white shadow-lg hover:scale-110 transition-transform"></button>
                        <button onclick="app.selectAvatarColor('from-red-500 to-orange-600')" class="w-12 h-12 rounded-full bg-gradient-to-br from-red-500 to-orange-600 border-2 border-transparent hover:border-white shadow-lg hover:scale-110 transition-transform"></button>
                        <button onclick="app.selectAvatarColor('from-green-500 to-emerald-600')" class="w-12 h-12 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 border-2 border-transparent hover:border-white shadow-lg hover:scale-110 transition-transform"></button>
                        <button onclick="app.selectAvatarColor('from-yellow-500 to-amber-600')" class="w-12 h-12 rounded-full bg-gradient-to-br from-yellow-500 to-amber-600 border-2 border-transparent hover:border-white shadow-lg hover:scale-110 transition-transform"></button>
                        <button onclick="app.selectAvatarColor('from-pink-500 to-rose-600')" class="w-12 h-12 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 border-2 border-transparent hover:border-white shadow-lg hover:scale-110 transition-transform"></button>
                    </div>
                </div>

                <button onclick="app.saveAvatar()" class="btn-neon w-full mt-6">
                    <i class="fas fa-check mr-2"></i>Guardar Avatar
                </button>
            </div>
        </div>
    </div>

    <!-- Inventory Modal -->
    <div id="inventoryModal" class="modal">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-orbitron text-2xl text-yellow-400">Mi Inventario</h3>
                <button onclick="app.closeModal('inventoryModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            <div id="inventoryGrid" class="inventory-grid">
                <!-- Items inserted here -->
            </div>
        </div>
    </div>

    <!-- Shop Modal -->
    <div id="shopModal" class="modal">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-4">
                    <h3 class="font-orbitron text-2xl text-green-400">Tienda</h3>
                    <div class="flex items-center gap-2 text-yellow-400 bg-yellow-400/10 px-3 py-1 rounded-full border border-yellow-400/30">
                        <i class="fas fa-coins"></i>
                        <span id="shopGold" class="font-bold">0</span>
                    </div>
                </div>
                <button onclick="app.closeModal('shopModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            <div id="shopItems" class="grid grid-cols-1 gap-3 max-h-96 overflow-y-auto">
                <!-- Shop items inserted here -->
            </div>
        </div>
    </div>

    <!-- Achievements Modal -->
    <div id="achievementsModal" class="modal">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-orbitron text-2xl text-yellow-400">Logros</h3>
                <button onclick="app.closeModal('achievementsModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            
            <div class="mb-6">
                <div class="flex justify-between text-sm mb-2 text-gray-300">
                    <span>Progreso Total</span>
                    <span id="achievementProgress" class="text-yellow-400 font-bold">0/161</span>
                </div>
                <div class="progress-bar">
                    <div id="achievementBar" class="progress-fill" style="width: 0%"></div>
                </div>
            </div>

            <div id="achievementsList" class="space-y-2 max-h-96 overflow-y-auto">
                <!-- Achievements inserted here -->
            </div>
        </div>
    </div>

    <!-- Boss Modal -->
    <div id="bossModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="font-orbitron text-2xl text-red-400">Jefe Semanal</h3>
                <button onclick="app.closeModal('bossModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            
            <div class="text-center mb-6">
                <div class="text-6xl mb-4 animate-bounce">üëπ</div>
                <h4 class="text-2xl font-bold text-red-400 mb-2">Procrastinaci√≥n Suprema</h4>
                <p class="text-gray-400">Nivel <span id="modalBossLevel">5</span></p>
            </div>

            <div class="boss-health mb-4">
                <div id="modalBossHealth" class="boss-health-fill" style="width: 75%"></div>
            </div>

            <p class="text-center text-sm text-gray-400 mb-6">
                Completa misiones para da√±ar al jefe. ¬°Derrotarlo otorga grandes recompensas!
            </p>

            <div class="grid grid-cols-3 gap-3 text-center">
                <div class="p-3 bg-yellow-500/10 rounded-lg border border-yellow-500/30">
                    <i class="fas fa-bolt text-yellow-400 text-xl mb-1 block"></i>
                    <span class="text-sm text-yellow-300">+500 XP</span>
                </div>
                <div class="p-3 bg-yellow-600/10 rounded-lg border border-yellow-600/30">
                    <i class="fas fa-coins text-yellow-600 text-xl mb-1 block"></i>
                    <span class="text-sm text-yellow-500">+100 Oro</span>
                </div>
                <div class="p-3 bg-purple-500/10 rounded-lg border border-purple-500/30">
                    <i class="fas fa-gift text-purple-400 text-xl mb-1 block"></i>
                    <span class="text-sm text-purple-300">Cofre √âpico</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Party Modal -->
    <div id="partyModal" class="modal">
        <div class="modal-content max-w-lg h-[500px] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-orbitron text-xl text-purple-300">Chat de Party</h3>
                <button onclick="app.closeModal('partyModal')" class="text-gray-400 hover:text-white text-2xl transition-colors">&times;</button>
            </div>
            
            <div id="chatMessages" class="flex-1 overflow-y-auto space-y-3 mb-4 bg-black/20 rounded-lg p-4 border border-purple-500/20">
                <div class="chat-message other">
                    <p class="text-xs text-purple-400 mb-1 font-bold">Sistema</p>
                    <p class="text-sm text-gray-300">¬°Bienvenido al chat de party! Completa misiones para motivar a tus compa√±eros.</p>
                </div>
            </div>

            <div class="flex gap-2">
                <input type="text" id="chatInput" placeholder="Escribe un mensaje..." 
                    class="flex-1 bg-black/30 border border-purple-500/50 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-400 transition-colors"
                    onkeypress="if(event.key==='Enter')app.sendChatMessage()">
                <button onclick="app.sendChatMessage()" class="btn-neon btn-pink px-4">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- ==========================================
         JAVASCRIPT CORREGIDO
         ========================================== -->
    <script>
        console.log('üéÆ LifeQuest RPG - Iniciando...');

        // Global error handler
        window.onerror = function(msg, url, line, col, error) {
            console.error('‚ùå Error:', msg, 'en l√≠nea', line);
            return false;
        };

        // Sanitizaci√≥n
        const sanitize = {
            html: (str) => {
                if (!str) return '';
                const div = document.createElement('div');
                div.textContent = String(str);
                return div.innerHTML;
            },
            input: (str) => {
                if (!str) return '';
                return String(str).replace(/[<>\"']/g, '');
            }
        };

        // Audio Manager
        class AudioManager {
            constructor() {
                this.context = null;
                this.initialized = false;
            }

            init() {
                if (this.initialized) return;
                try {
                    this.context = new (window.AudioContext || window.webkitAudioContext)();
                    this.initialized = true;
                } catch (e) {
                    console.warn('Audio no disponible');
                }
            }

            playTone(freq, type = 'sine', duration = 0.1) {
                if (!this.initialized) this.init();
                if (!this.context) return;
                
                const osc = this.context.createOscillator();
                const gain = this.context.createGain();
                osc.connect(gain);
                gain.connect(this.context.destination);
                osc.frequency.value = freq;
                osc.type = type;
                gain.gain.setValueAtTime(0.3, this.context.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.context.currentTime + duration);
                osc.start();
                osc.stop(this.context.currentTime + duration);
                
                setTimeout(() => {
                    osc.disconnect();
                    gain.disconnect();
                }, duration * 1000 + 50);
            }

            playSuccess() {
                this.playTone(523.25, 'sine', 0.1);
                setTimeout(() => this.playTone(659.25, 'sine', 0.1), 100);
                setTimeout(() => this.playTone(783.99, 'sine', 0.2), 200);
            }

            playLevelUp() {
                [523.25, 659.25, 783.99, 1046.50].forEach((f, i) => {
                    setTimeout(() => this.playTone(f, 'square', 0.3), i * 150);
                });
            }

            destroy() {
                if (this.context) {
                    this.context.close();
                    this.context = null;
                }
            }
        }

        // App Principal
        class LifeQuestApp {
            constructor() {
                this.data = this.loadData();
                this.audio = new AudioManager();
                this.listeners = [];
                this.tempAvatar = null;
                this.tempAvatarColor = null;
                this.init();
            }

            init() {
                try {
                    this.createStars();
                    this.setupListeners();
                    this.checkDailyReset();
                    this.renderAll();
                    this.hideLoading();
                    console.log('‚úÖ App cargada');
                } catch (e) {
                    console.error('Error init:', e);
                }
            }

            generateId() {
                if (crypto.randomUUID) return crypto.randomUUID();
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            }

            loadData() {
                const defaults = {
                    player: {
                        name: 'H√©roe',
                        email: 'jugador@lifequest.com',
                        level: 1,
                        xp: 0,
                        gold: 0,
                        avatar: 'üßô‚Äç‚ôÇÔ∏è',
                        avatarColor: 'from-cyan-500 to-purple-600',
                        title: 'Novato'
                    },
                    quests: [],
                    completedQuests: 0,
                    achievements: [],
                    inventory: [],
                    boss: { level: 5, currentHP: 750, maxHP: 1000 },
                    stats: {
                        streakDays: 0,
                        lastActive: new Date().toISOString(),
                        totalPlayTime: 0,
                        categories: { strength: 0, intelligence: 0, discipline: 0, social: 0, wellness: 0 }
                    }
                };

                try {
                    const saved = localStorage.getItem('lifequest_data');
                    return saved ? { ...defaults, ...JSON.parse(saved) } : defaults;
                } catch (e) {
                    return defaults;
                }
            }

            saveData() {
                try {
                    localStorage.setItem('lifequest_data', JSON.stringify(this.data));
                } catch (e) {
                    console.error('Error guardando:', e);
                }
            }

            setupListeners() {
                const save = () => this.saveData();
                window.addEventListener('beforeunload', save);
                this.listeners.push({ el: window, ev: 'beforeunload', fn: save });
            }

            createStars() {
                const container = document.getElementById('starsContainer');
                for (let i = 0; i < 100; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.cssText = `
                        left: ${Math.random() * 100}%;
                        top: ${Math.random() * 100}%;
                        width: ${Math.random() * 3}px;
                        height: ${star.style.width};
                        animation-delay: ${Math.random() * 3}s;
                    `;
                    container.appendChild(star);
                }
            }

            renderAll() {
                this.renderPlayer();
                this.renderQuests();
                this.renderBoss();
                this.renderStats();
                this.renderAchievements();
            }

            renderPlayer() {
                const p = this.data.player;
                document.getElementById('playerName').textContent = sanitize.html(p.name);
                document.getElementById('playerEmail').textContent = sanitize.html(p.email);
                document.getElementById('currentLevel').textContent = p.level;
                document.getElementById('levelBadge').textContent = p.level;
                document.getElementById('currentXP').textContent = p.xp;
                
                const needed = Math.floor(100 * Math.pow(1.5, p.level - 1));
                document.getElementById('neededXP').textContent = needed;
                
                const pct = Math.min((p.xp / needed) * 100, 100);
                document.getElementById('xpBarFill').style.width = pct + '%';
                document.getElementById('xpPercentage').textContent = Math.floor(pct) + '%';
                document.getElementById('goldAmount').textContent = p.gold;
                
                const avatar = document.getElementById('avatarDisplay');
                avatar.textContent = p.avatar;
                avatar.className = `w-24 h-24 rounded-full bg-gradient-to-br ${p.avatarColor} flex items-center justify-center text-5xl border-4 border-cyan-400 shadow-lg shadow-cyan-500/50 transition-transform group-hover:scale-110`;
                
                document.querySelectorAll('.party-level').forEach(el => el.textContent = p.level);
            }

            renderQuests() {
                const list = document.getElementById('questList');
                const quests = this.data.quests;
                
                if (quests.length === 0) {
                    list.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-scroll text-4xl mb-3 opacity-30"></i>
                            <p>No hay misiones activas</p>
                            <p class="text-xs mt-1">¬°Crea tu primera misi√≥n!</p>
                        </div>
                    `;
                    return;
                }

                list.innerHTML = quests.map(q => `
                    <div class="quest-item ${q.completed ? 'completed' : ''}" data-id="${q.id}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1 cursor-pointer" onclick="app.toggleQuest('${q.id}')">
                                <h4 class="font-bold ${q.completed ? 'line-through text-gray-500' : 'text-cyan-300'} mb-1">
                                    ${sanitize.html(q.name)}
                                </h4>
                                <div class="flex gap-2 flex-wrap">
                                    <span class="text-xs px-2 py-1 rounded bg-black/30 ${this.getCatColor(q.category)}">
                                        ${this.getCatIcon(q.category)} ${this.getCatName(q.category)}
                                    </span>
                                    <span class="text-xs px-2 py-1 rounded bg-black/30 text-gray-400">
                                        ${this.getDiffLabel(q.difficulty)}
                                    </span>
                                    <span class="text-xs px-2 py-1 rounded bg-black/30 text-yellow-400">
                                        +${this.getXP(q.difficulty)} XP
                                    </span>
                                </div>
                            </div>
                            <div class="flex gap-2 ml-2">
                                <button onclick="event.stopPropagation(); app.completeQuest('${q.id}')" 
                                    class="w-8 h-8 rounded bg-green-500/20 text-green-400 hover:bg-green-500/40 flex items-center justify-center transition-colors ${q.completed ? 'opacity-50' : ''}"
                                    ${q.completed ? 'disabled' : ''}>
                                    <i class="fas fa-check"></i>
                                </button>
                                <button onclick="event.stopPropagation(); app.deleteQuest('${q.id}')" 
                                    class="w-8 h-8 rounded bg-red-500/20 text-red-400 hover:bg-red-500/40 flex items-center justify-center transition-colors">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            renderBoss() {
                const b = this.data.boss;
                const pct = (b.currentHP / b.maxHP) * 100;
                document.getElementById('bossLevel').textContent = b.level;
                document.getElementById('modalBossLevel').textContent = b.level;
                document.getElementById('bossCurrentHP').textContent = b.currentHP;
                document.getElementById('bossMaxHP').textContent = b.maxHP;
                document.getElementById('bossHealthBar').style.width = pct + '%';
                document.getElementById('modalBossHealth').style.width = pct + '%';
            }

            renderStats() {
                document.getElementById('statQuests').textContent = this.data.completedQuests;
                document.getElementById('statStreak').textContent = this.data.stats.streakDays;
                document.getElementById('statAchievements').textContent = (this.data.achievements || []).length;
                document.getElementById('achievementsCount').textContent = (this.data.achievements || []).length;
                
                const hours = Math.floor((this.data.stats.totalPlayTime || 0) / 3600);
                document.getElementById('statTime').textContent = hours + 'h';
            }

            renderAchievements() {
                const unlocked = this.data.achievements || [];
                const recent = document.getElementById('recentAchievements');
                
                if (unlocked.length === 0) {
                    recent.innerHTML = '<p class="text-gray-500 text-center py-4 text-sm">A√∫n no has desbloqueado logros</p>';
                    return;
                }

                // Show last 3
                const last = unlocked.slice(-3);
                recent.innerHTML = last.map(id => {
                    const ach = this.getAchievement(id);
                    return ach ? `
                        <div class="achievement-card text-sm">
                            <div class="text-2xl">${ach.icon}</div>
                            <div>
                                <p class="font-bold text-yellow-400">${sanitize.html(ach.name)}</p>
                                <p class="text-xs text-gray-400">${sanitize.html(ach.desc)}</p>
                            </div>
                        </div>
                    ` : '';
                }).join('');
            }

            getAchievement(id) {
                const all = this.getAllAchievements();
                return all.find(a => a.id === id);
            }

            getAllAchievements() {
                const achs = [];
                // Level achievements
                for (let i = 1; i <= 20; i++) {
                    achs.push({ id: `lvl_${i}`, name: `Nivel ${i}`, desc: `Alcanza el nivel ${i}`, icon: '‚≠ê' });
                }
                // Quest achievements
                for (let i = 1; i <= 10; i++) {
                    achs.push({ id: `q_${i*10}`, name: `Cazador ${i*10}`, desc: `Completa ${i*10} misiones`, icon: 'üìú' });
                }
                // Gold achievements
                for (let i = 1; i <= 10; i++) {
                    achs.push({ id: `g_${i*100}`, name: `Rico ${i*100}`, desc: `Acumula ${i*100} oro`, icon: 'üí∞' });
                }
                // Special
                achs.push(
                    { id: 'first', name: 'Primeros Pasos', desc: 'Completa tu primera misi√≥n', icon: 'üë£' },
                    { id: 'legend', name: 'Leyenda', desc: 'Alcanza nivel 50', icon: 'üëë' }
                );
                return achs;
            }

            checkAchievements() {
                const unlocked = this.data.achievements || [];
                let newUnlock = false;
                
                // Check level achievements
                for (let i = 1; i <= this.data.player.level; i++) {
                    if (!unlocked.includes(`lvl_${i}`)) {
                        unlocked.push(`lvl_${i}`);
                        newUnlock = true;
                    }
                }
                
                // Check quest achievements
                for (let i = 1; i <= 10; i++) {
                    if (this.data.completedQuests >= i*10 && !unlocked.includes(`q_${i*10}`)) {
                        unlocked.push(`q_${i*10}`);
                        newUnlock = true;
                    }
                }
                
                if (newUnlock) {
                    this.data.achievements = unlocked;
                    this.saveData();
                    this.renderAchievements();
                    this.renderStats();
                }
            }

            addQuest() {
                const input = document.getElementById('questInput');
                const name = sanitize.input(input.value.trim());
                if (!name) {
                    this.showNotification('Ingresa un nombre', 'error');
                    return;
                }

                const quest = {
                    id: this.generateId(),
                    name: name,
                    category: document.getElementById('questCategory').value,
                    difficulty: document.getElementById('questDifficulty').value,
                    completed: false,
                    createdAt: new Date().toISOString()
                };

                this.data.quests.push(quest);
                this.saveData();
                this.renderQuests();
                input.value = '';
                this.showNotification('¬°Misi√≥n creada!', 'success');
                this.createParticles(event.target, '‚ú®');
            }

            toggleQuest(id) {
                const q = this.data.quests.find(x => x.id === id);
                if (q) {
                    q.completed = !q.completed;
                    this.saveData();
                    this.renderQuests();
                }
            }

            completeQuest(id) {
                const idx = this.data.quests.findIndex(x => x.id === id);
                if (idx === -1) return;
                
                const q = this.data.quests[idx];
                if (q.completed) return;

                q.completed = true;
                this.data.completedQuests++;
                
                const xp = this.getXP(q.difficulty);
                const gold = this.getGold(q.difficulty);
                const dmg = this.getDamage(q.difficulty);
                
                this.addXP(xp);
                this.addGold(gold);
                this.damageBoss(dmg);
                
                this.data.stats.categories[q.category]++;
                this.data.quests.splice(idx, 1);
                
                this.checkAchievements();
                this.saveData();
                this.renderAll();
                
                this.audio.playSuccess();
                this.showNotification(`+${xp} XP +${gold} Oro`, 'success');
                this.createConfetti();
                
                if (this.data.boss.currentHP <= 0) {
                    this.defeatBoss();
                }
            }

            deleteQuest(id) {
                if (!confirm('¬øEliminar misi√≥n?')) return;
                this.data.quests = this.data.quests.filter(x => x.id !== id);
                this.saveData();
                this.renderQuests();
            }

            damageBoss(dmg) {
                this.data.boss.currentHP = Math.max(0, this.data.boss.currentHP - dmg);
                this.renderBoss();
                
                const bar = document.getElementById('bossHealthBar');
                bar.parentElement.classList.add('shake');
                setTimeout(() => bar.parentElement.classList.remove('shake'), 500);
                
                // Damage number
                const num = document.createElement('div');
                num.className = 'damage-number';
                num.textContent = '-' + dmg;
                num.style.cssText = 'position:absolute;left:50%;top:50%;color:#ff0040;font-weight:bold;font-size:1.5rem;pointer-events:none;animation:damageFloat 1s ease-out forwards;';
                bar.parentElement.appendChild(num);
                setTimeout(() => num.remove(), 1000);
            }

            defeatBoss() {
                this.audio.playLevelUp();
                this.addXP(500);
                this.addGold(100);
                
                this.data.boss.level++;
                this.data.boss.maxHP = 1000 + (this.data.boss.level * 200);
                this.data.boss.currentHP = this.data.boss.maxHP;
                
                this.showNotification('¬°JEFE DERROTADO! +500 XP +100 Oro', 'success');
                this.createConfetti();
                
                this.addToInventory({
                    id: this.generateId(),
                    name: 'Cofre √âpico',
                    icon: 'üéÅ',
                    type: 'chest',
                    equipped: false
                });
            }

            addXP(amount) {
                this.data.player.xp += amount;
                const needed = Math.floor(100 * Math.pow(1.5, this.data.player.level - 1));
                if (this.data.player.xp >= needed) {
                    this.levelUp();
                }
            }

            levelUp() {
                this.data.player.level++;
                this.data.player.xp = 0;
                this.audio.playLevelUp();
                this.showNotification(`¬°NIVEL ${this.data.player.level}!`, 'success');
                
                const badge = document.getElementById('levelBadge');
                badge.classList.add('level-up');
                setTimeout(() => badge.classList.remove('level-up'), 1000);
                
                this.createConfetti();
            }

            addGold(amount) {
                this.data.player.gold += amount;
                this.renderPlayer();
            }

            addToInventory(item) {
                if (!this.data.inventory) this.data.inventory = [];
                this.data.inventory.push(item);
            }

            getXP(diff) {
                return { easy: 20, medium: 50, hard: 100, epic: 200 }[diff] || 50;
            }

            getGold(diff) {
                return { easy: 5, medium: 10, hard: 25, epic: 50 }[diff] || 10;
            }

            getDamage(diff) {
                return { easy: 25, medium: 50, hard: 100, epic: 200 }[diff] || 50;
            }

            getCatName(cat) {
                return { strength: 'Fuerza', intelligence: 'Inteligencia', discipline: 'Disciplina', social: 'Social', wellness: 'Bienestar' }[cat] || cat;
            }

            getCatIcon(cat) {
                return { strength: 'üí™', intelligence: 'üß†', discipline: '‚è∞', social: 'üë•', wellness: '‚ù§Ô∏è' }[cat] || '‚≠ê';
            }

            getCatColor(cat) {
                return { strength: 'text-red-400', intelligence: 'text-blue-400', discipline: 'text-purple-400', social: 'text-green-400', wellness: 'text-pink-400' }[cat] || 'text-cyan-400';
            }

            getDiffLabel(diff) {
                return { easy: 'üü¢ F√°cil', medium: 'üü° Medio', hard: 'üî¥ Dif√≠cil', epic: 'üü£ √âpico' }[diff] || diff;
            }

            // Modals
            openModal(id) {
                document.getElementById(id).classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            closeModal(id) {
                document.getElementById(id).classList.remove('active');
                document.body.style.overflow = '';
            }

            openProfileModal() {
                document.getElementById('editName').value = this.data.player.name;
                document.getElementById('editEmail').value = this.data.player.email;
                this.openModal('profileModal');
            }

            saveProfile() {
                this.data.player.name = sanitize.input(document.getElementById('editName').value) || 'H√©roe';
                this.data.player.email = sanitize.input(document.getElementById('editEmail').value) || '';
                this.saveData();
                this.renderPlayer();
                this.closeModal('profileModal');
                this.showNotification('Perfil guardado', 'success');
            }

            openAvatarModal() {
                this.tempAvatar = this.data.player.avatar;
                this.tempAvatarColor = this.data.player.avatarColor;
                document.getElementById('avatarPreview').textContent = this.tempAvatar;
                this.openModal('avatarModal');
            }

            selectAvatar(emoji) {
                this.tempAvatar = emoji;
                document.getElementById('avatarPreview').textContent = emoji;
            }

            selectAvatarColor(color) {
                this.tempAvatarColor = color;
                document.getElementById('avatarPreview').className = `w-24 h-24 mx-auto rounded-full bg-gradient-to-br ${color} flex items-center justify-center text-5xl mb-4 border-4 border-cyan-400 shadow-lg shadow-cyan-500/50`;
            }

            saveAvatar() {
                if (this.tempAvatar) this.data.player.avatar = this.tempAvatar;
                if (this.tempAvatarColor) this.data.player.avatarColor = this.tempAvatarColor;
                this.saveData();
                this.renderPlayer();
                this.closeModal('avatarModal');
                this.showNotification('Avatar actualizado', 'success');
            }

            openInventoryModal() {
                const grid = document.getElementById('inventoryGrid');
                const items = this.data.inventory || [];
                
                if (items.length === 0) {
                    grid.innerHTML = '<p class="col-span-full text-center text-gray-500 py-8">Inventario vac√≠o</p>';
                } else {
                    grid.innerHTML = items.map(item => `
                        <div class="inventory-item ${item.equipped ? 'equipped' : ''}" onclick="app.toggleEquip('${item.id}')" title="${sanitize.html(item.name)}">
                            ${item.icon}
                            ${item.equipped ? '<div class="absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-xs">‚úì</div>' : ''}
                        </div>
                    `).join('');
                }
                this.openModal('inventoryModal');
            }

            toggleEquip(id) {
                const item = this.data.inventory.find(i => i.id === id);
                if (!item) return;
                
                this.data.inventory.forEach(i => {
                    if (i.type === item.type && i.id !== id) i.equipped = false;
                });
                item.equipped = !item.equipped;
                this.saveData();
                this.openInventoryModal();
            }

            openShopModal() {
                document.getElementById('shopGold').textContent = this.data.player.gold;
                const items = [
                    { id: 'av1', name: 'Guerrero', icon: '‚öîÔ∏è', price: 100, type: 'avatar' },
                    { id: 'av2', name: 'Mago', icon: 'üîÆ', price: 100, type: 'avatar' },
                    { id: 'av3', name: 'Arquero', icon: 'üèπ', price: 150, type: 'avatar' },
                    { id: 'col1', name: 'Dorado', color: 'from-yellow-400 to-orange-500', price: 300, type: 'color' }
                ];
                
                document.getElementById('shopItems').innerHTML = items.map(item => {
                    const owned = this.data.inventory.some(i => i.shopId === item.id);
                    const canBuy = this.data.player.gold >= item.price;
                    
                    return `
                        <div class="glass-card p-4 flex items-center justify-between ${!canBuy ? 'opacity-60' : ''}">
                            <div class="flex items-center gap-3">
                                <div class="text-3xl">${item.icon || '‚ú®'}</div>
                                <div>
                                    <p class="font-bold text-cyan-300">${sanitize.html(item.name)}</p>
                                    <p class="text-xs text-gray-400">${item.type === 'avatar' ? 'Avatar' : 'Color'}</p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-yellow-400 font-bold mb-1"><i class="fas fa-coins mr-1"></i>${item.price}</p>
                                ${owned ? 
                                    '<span class="text-green-400 text-xs">‚úì Comprado</span>' :
                                    `<button onclick="app.buyItem('${item.id}', ${item.price}, '${item.type}', '${item.icon || ''}', '${item.color || ''}')" 
                                        class="btn-neon text-xs py-1 px-3 ${!canBuy ? 'opacity-50' : ''}" ${!canBuy ? 'disabled' : ''}>
                                        Comprar
                                    </button>`
                                }
                            </div>
                        </div>
                    `;
                }).join('');
                
                this.openModal('shopModal');
            }

            buyItem(id, price, type, icon, color) {
                if (this.data.player.gold < price) return;
                
                this.data.player.gold -= price;
                
                if (type === 'avatar') this.data.player.avatar = icon;
                if (type === 'color') this.data.player.avatarColor = color;
                
                this.addToInventory({
                    id: this.generateId(),
                    shopId: id,
                    name: type === 'avatar' ? 'Avatar' : 'Color',
                    icon: icon || 'üé®',
                    type: type,
                    equipped: true
                });
                
                this.saveData();
                this.renderPlayer();
                this.openShopModal();
                this.showNotification('¬°Comprado!', 'success');
                this.audio.playSuccess();
            }

            openAchievementsModal() {
                const list = document.getElementById('achievementsList');
                const all = this.getAllAchievements();
                const unlocked = this.data.achievements || [];
                
                const pct = (unlocked.length / 161) * 100;
                document.getElementById('achievementProgress').textContent = `${unlocked.length}/161`;
                document.getElementById('achievementBar').style.width = Math.min(pct, 100) + '%';
                
                list.innerHTML = all.map(a => {
                    const isUnlocked = unlocked.includes(a.id);
                    return `
                        <div class="achievement-card ${isUnlocked ? '' : 'locked'}">
                            <div class="text-2xl">${isUnlocked ? a.icon : 'üîí'}</div>
                            <div class="flex-1">
                                <p class="font-bold ${isUnlocked ? 'text-yellow-400' : 'text-gray-500'}">${sanitize.html(a.name)}</p>
                                <p class="text-sm text-gray-400">${sanitize.html(a.desc)}</p>
                            </div>
                            ${isUnlocked ? '<i class="fas fa-check-circle text-green-400"></i>' : ''}
                        </div>
                    `;
                }).join('');
                
                this.openModal('achievementsModal');
            }

            openBossModal() { this.openModal('bossModal'); }
            openPartyModal() { this.openModal('partyModal'); }

            sendChatMessage() {
                const input = document.getElementById('chatInput');
                const msg = sanitize.input(input.value.trim());
                if (!msg) return;

                const container = document.getElementById('chatMessages');
                container.innerHTML += `
                    <div class="chat-message own">
                        <p class="text-xs text-pink-400 mb-1 font-bold">${sanitize.html(this.data.player.name)}</p>
                        <p class="text-sm text-gray-200">${sanitize.html(msg)}</p>
                    </div>
                `;
                container.scrollTop = container.scrollHeight;
                input.value = '';

                // Auto reply
                setTimeout(() => {
                    const replies = ['¬°Gran trabajo! üí™', '¬°Sigue as√≠! üî•', '¬°Incre√≠ble! ‚≠ê', '¬°Vamos! üëä'];
                    container.innerHTML += `
                        <div class="chat-message other">
                            <p class="text-xs text-cyan-400 mb-1 font-bold">Compa√±ero</p>
                            <p class="text-sm text-gray-200">${replies[Math.floor(Math.random() * replies.length)]}</p>
                        </div>
                    `;
                    container.scrollTop = container.scrollHeight;
                }, 1500);
            }

            switchTab(tab) {
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                event.currentTarget.classList.add('active');
                
                if (tab === 'shop') this.openShopModal();
                if (tab === 'avatar') this.openAvatarModal();
                if (tab === 'profile') this.openProfileModal();
            }

            showNotification(msg, type = 'success') {
                const container = document.getElementById('notificationContainer');
                const div = document.createElement('div');
                div.className = `notification ${type}`;
                const icon = type === 'success' ? '‚ú®' : type === 'error' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
                const title = type === 'success' ? '¬°√âxito!' : type === 'error' ? 'Error' : 'Info';
                const color = type === 'success' ? 'text-green-400' : type === 'error' ? 'text-red-400' : 'text-blue-400';
                
                div.innerHTML = `
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">${icon}</span>
                        <div class="flex-1">
                            <p class="font-bold ${color} mb-1">${title}</p>
                            <p class="text-sm text-gray-300">${sanitize.html(msg)}</p>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" class="text-gray-500 hover:text-white">&times;</button>
                    </div>
                `;
                
                container.appendChild(div);
                requestAnimationFrame(() => div.classList.add('show'));
                
                setTimeout(() => {
                    div.classList.remove('show');
                    setTimeout(() => div.remove(), 300);
                }, 3000);
            }

            createParticles(el, emoji) {
                const rect = el.getBoundingClientRect();
                for (let i = 0; i < 5; i++) {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.textContent = emoji;
                    p.style.cssText = `
                        left: ${rect.left + rect.width/2}px;
                        top: ${rect.top}px;
                        font-size: 20px;
                        --tx: ${(Math.random()-0.5)*100}px;
                        --ty: ${(Math.random()-1)*100}px;
                        animation: particleFloat 1s ease-out forwards;
                    `;
                    document.body.appendChild(p);
                    setTimeout(() => p.remove(), 1000);
                }
            }

            createConfetti() {
                const colors = ['#00f3ff', '#ff00ff', '#00ff88', '#ffff00'];
                for (let i = 0; i < 30; i++) {
                    const c = document.createElement('div');
                    c.className = 'confetti';
                    c.style.cssText = `
                        left: ${Math.random() * 100}vw;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        animation: confettiFall ${Math.random() * 2 + 2}s linear forwards;
                        animation-delay: ${Math.random() * 0.5}s;
                    `;
                    document.body.appendChild(c);
                    setTimeout(() => c.remove(), 4000);
                }
            }

            checkDailyReset() {
                const last = new Date(this.data.stats.lastActive);
                const now = new Date();
                const lastReset = new Date(last);
                lastReset.setHours(5, 0, 0, 0);
                
                const currReset = new Date(now);
                currReset.setHours(5, 0, 0, 0);
                
                if (now > currReset && last < currReset) {
                    this.showNotification('üåÖ Misiones reiniciadas', 'info');
                }
                
                const daysDiff = Math.floor((now - last) / (1000 * 60 * 60 * 24));
                if (daysDiff === 1) {
                    this.data.stats.streakDays++;
                    this.showNotification(`¬°Racha ${this.data.stats.streakDays} d√≠as! üî•`, 'success');
                } else if (daysDiff > 1) {
                    this.data.stats.streakDays = 0;
                }
                
                this.data.stats.lastActive = now.toISOString();
                this.saveData();
            }

            exportData() {
                const dataStr = JSON.stringify(this.data, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `lifequest_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showNotification('Datos exportados', 'success');
            }

            confirmReset() {
                if (confirm('¬øBorrar TODO el progreso?')) {
                    if (confirm('¬øSeguro? No se puede deshacer')) {
                        localStorage.removeItem('lifequest_data');
                        location.reload();
                    }
                }
            }

            hideLoading() {
                setTimeout(() => {
                    document.getElementById('loadingScreen').classList.add('hidden');
                }, 800);
            }

            destroy() {
                this.listeners.forEach(l => l.el.removeEventListener(l.ev, l.fn));
                this.audio.destroy();
                this.saveData();
            }
        }

        // Initialize
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            try {
                app = new LifeQuestApp();
                window.app = app;
                window.addEventListener('beforeunload', () => app.destroy());
            } catch (e) {
                console.error('Error fatal:', e);
                alert('Error al cargar. Recarga la p√°gina.');
            }
        });

        // File drop for import
        document.addEventListener('dragover', e => { e.preventDefault(); });
        document.addEventListener('drop', e => {
            e.preventDefault();
            const file = e.dataTransfer.files[0];
            if (file && file.name.endsWith('.json')) {
                const reader = new FileReader();
                reader.onload = evt => {
                    try {
                        const data = JSON.parse(evt.target.result);
                        app.data = { ...app.data, ...data };
                        app.saveData();
                        app.renderAll();
                        app.showNotification('Datos importados', 'success');
                    } catch (err) {
                        app.showNotification('Error al importar', 'error');
                    }
                };
                reader.readAsText(file);
            }
        });
    </script>
</body>
</html>
